<!DOCTYPE html
          PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head><title>past (RaQL expression)</title>
<meta charset="utf-8"/></head>
<body><h1>Group past values based on time</h1>
<p>this is an aggregate function. As such, it accepts a single operand which can wither be a scalar, in which case it will operate in turn on each item of the group, or an array or a vector in which case it will operate on each value in sequence and return the result (in practice, this process is delayed until the group is submitted for performance reasons)</p>
<p>User can choose to skip over NULL values or to include them in the computation with one of the modifiers <em>SKIP NULLS</em>
 to skip NULL values (the default) and <em>KEEP NULLS</em>
 to include them.</p>
<p>In the first case the result will still be NULL if all input values are NULL, and in the last case any NULL value will
                 make the result NULL.</p>
<p>The other modifier tells whether the state used to compute the aggregate must be local (each group has its own independent state) or global (all groups share a single state). In general when using a GROUP-BY clause the former behavior is intended, and it is thus the default when an explicit GROUP-BY clause is present. Otherwise, the default is to use only one global state.</p>
<p>One can choose between those two with the modifier <em>LOCALLY</em>
 to force a group-wise state and <em>GLOBALLY</em>
 to force a global state.</p>
<p>This choice of the state lifespan is only meaningful when the operation is applied to a single scalar value, since the state required to compute the end result over a literal array or vector lives only as long as that computation.</p>
<h2>Syntax</h2>
<p>[ SAMPLE [ OF SIZE ] …num-expr… [ OF THE ] ] PAST …num-expr… [ SLIDING | TUMBLING ] [ OF ] …expr…</p>
<h2>Typing</h2>
<p>num, num, t -&gt; t[]</p>
<h2>Description</h2>
<p><b>PAST</b>
 is similar to <b>GROUP</b>
 but it regroups values based on time rather than number of incoming values. Also, it contains an internal sampling mechanism.</p>
<p>If <em>TUMBLING</em>
 is selected then time is divided into windows of the given duration aligned such that timestamp modulo duration is NULL, and those whole windows worth of values are returned in one go once they are completed.</p>
<p>Otherwise, if <em>SLIDING</em>
 if selected (or if nothing is specified) then at every step the last values within the specified duration are returned. This is the default behavior.</p>
<h2>Limitations</h2>
<p>The duration of the time window as well as the sampling size must be constants.</p>
<h2>See Also</h2>
<a href="group.html">Collect values into an array</a>
<a href="once-every.html"></a>
<a href="one-out-of.html">Nullifies all values but one out of N</a>
</body>
</html>
