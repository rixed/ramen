<!DOCTYPE html
          PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"><head><title>once-every (RaQL expression)</title>
</head>
<body><h1></h1>
<p>this is an aggregate function. As such, it accepts a single operand which can wither be a scalar, in which case it will operate in turn on each item of the group, or an array or a vector in which case it will operate on each value in sequence and return the result (in practice, this process is delayed until the group is submitted for performance reasons)</p>
<p>User can choose to skip over NULL values or to include them in the computation with one of the modifiers <em>SKIP NULLS</em>
 to skip NULL values (the default) and <em>KEEP NULLS</em>
 to include them.</p>
<p>In the first case the result will still be NULL if all input values are NULL, and in the last case any NULL value will
                 make the result NULL.</p>
<p>The other modifier tells whether the state used to compute the aggregate must be local (each group has its own independent state) or global (all groups share a single state). In general when using a GROUP-BY clause the former behavior is intended, and it is thus the default when an explicit GROUP-BY clause is present. Otherwise, the default is to use only one global state.</p>
<p>One can choose between those two with the modifier <em>LOCALLY</em>
 to force a group-wise state and <em>GLOBALLY</em>
 to force a global state.</p>
<p>This choice of the state lifespan is only meaningful when the operation is applied to a single scalar value, since the state required to compute the end result over a literal array or vector lives only as long as that computation.</p>
<h2>Syntax</h2>
<p>EVERY …num-expr… [ SLIDING | TUMBLING ] …expr…</p>
<p>EVERY(…num-expr…, …bool-expr…, …expr…)</p>
<h2>Typing</h2>
<p>num, BOOL, t -&gt; t?</p>
<h2>Description</h2>
<p><b>EVERY</b>
 is similar to <b>ONE OUT OF</b>
 but based on time rather than number of inputs.</p>
<p>If <em>TUMBLING</em>
 is selected (or the second operand of the functional syntax is true) then time is divided into windows of the given duration (aligned such that timestamp modulo duration is NULL), and the first value of each new such window is selected (and all others are NULL), whereas if <em>SLIDING</em>
 is selected then the next value after at least the selected duration is selected (regardless of time alignment).</p>
<h2>Limitations</h2>
<p>The period must be a constant.</p>
<h2>See Also</h2>
<a href="one-out-of.html">Nullifies all values but one out of N</a>
<a href="past.html">Group past values based on time</a>
</body>
</html>
