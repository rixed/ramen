<html>
  <head>
    <meta charset="utf-8">
    <base href="https://rixed.github.io/ramen/">
    <link rel="stylesheet" href="style.css" type="text/css" media="screen">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <title>Ramen Documentation</title>
  </head>
<body>

<div id="header">
  <p class="title">Ramen Documentation</p>
  <p>
    <a class="github-cat" href="https://github.com/rixed/ramen">
      <svg class="octicon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M14.7 5.34c.13-.32.55-1.59-.13-3.31 0 0-1.05-.33-3.44 1.3-1-.28-2.07-.32-3.13-.32s-2.13.04-3.13.32c-2.39-1.64-3.44-1.3-3.44-1.3-.68 1.72-.26 2.99-.13 3.31C.49 6.21 0 7.33 0 8.69 0 13.84 3.33 15 7.98 15S16 13.84 16 8.69c0-1.36-.49-2.48-1.3-3.35zM8 14.02c-3.3 0-5.98-.15-5.98-3.35 0-.76.38-1.48 1.02-2.07 1.07-.98 2.9-.46 4.96-.46 2.07 0 3.88-.52 4.96.46.65.59 1.02 1.3 1.02 2.07 0 3.19-2.68 3.35-5.98 3.35zM5.49 9.01c-.66 0-1.2.8-1.2 1.78s.54 1.79 1.2 1.79c.66 0 1.2-.8 1.2-1.79s-.54-1.78-1.2-1.78zm5.02 0c-.66 0-1.2.79-1.2 1.78s.54 1.79 1.2 1.79c.66 0 1.2-.8 1.2-1.79s-.53-1.78-1.2-1.78z"></path></svg>
    <span class="github-link">to source code</span></a>
  </p>
</div>

<script type="application/json" class="js-hypothesis-config">{ "showHighlights": "whenSidebarOpen" }</script>
<script src="https://hypothes.is/embed.js" async></script>

<div id="menu">
  <ul>
            <li>
      <a class="" href="index.html">Overview</a>
        </li>
          <li>
      <a class="" href="download.html">Downloading</a>
        </li>
          <li>
      <a class="" href="build.html">Building</a>
        </li>
          <li>
      <a class="" href="tutorials.html">Tutorials</a>
        </li>
          <li>
      <a class="" href="design.html">Design</a>
        </li>
          <li>
      <a class="" href="roadmap.html">Roadmap</a>
        </li>
          <li>
      <a class="" href="man.html">Command line reference</a>
        </li>
          <li>
      <a class="" href="language_reference.html">Language reference</a>
        </li>
          <li>
      <a class="" href="glossary.html">Glossary</a>
        </li>
          <li>
      <a class="" href="blog.html">Blog posts</a>
        </li>
    </ul>
</div>

<div id="page">

<h1 align="center">RAMEN-CONFSERVER</h1>



<h2>NAME
<a name="NAME"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em">ramen-confserver
- Start the configuration synchronization service.</p>

<h2>SYNOPSIS
<a name="SYNOPSIS"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em"><b>ramen
confserver</b> [<i>OPTION</i>]...</p>

<h2>OPTIONS
<a name="OPTIONS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>--daemonize</b>
(absent <b>RAMEN_DAEMONIZE</b> env)</p>

<p style="margin-left:17%;">Daemonize.</p>


<p style="margin-left:11%;"><b>--default-archive-recall-cost</b>=<i>VAL</i>
(absent=0. or <b><br>
RAMEN_DEFAULT_ARCHIVE_RECALL_COST</b> env)</p>

<p style="margin-left:17%;">Default cost to read archives
vsrecomputing it.</p>


<p style="margin-left:11%;"><b>--default-archive-total-size</b>=<i>VAL</i>
(absent=1073741824 or <b><br>
RAMEN_DEFAULT_ARCHIVE_SIZE</b> env)</p>

<p style="margin-left:17%;">How many bytes of archives to
store by default.</p>

<p style="margin-left:11%;"><b>--help</b>[=<i>FMT</i>]
(default=auto)</p>

<p style="margin-left:17%;">Show this help in format
<i>FMT</i>. The value <i>FMT</i> must be one of
&rsquo;auto', &rsquo;pager', &rsquo;groff' or &rsquo;plain'.
With &rsquo;auto', the format is &rsquo;pager&rsquo; or
&rsquo;plain' whenever the <b>TERM</b> env var is
&rsquo;dumb' or undefined.</p>

<p style="margin-left:11%;"><b>--ignore-file-perms</b>
(absent <b>RAMEN_IGNORE_FILE_PERMS</b> env)</p>

<p style="margin-left:17%;">Do not check server private key
permissions.</p>


<p style="margin-left:11%;"><b>--incidents-history-length</b>=<i>VAL</i>
(absent=500 or <b><br>
RAMEN_INCIDENT_HISTORY_LENGTH</b> env)</p>

<p style="margin-left:17%;">How many resolved incidents to
keep in the configuration tree.</p>

<p style="margin-left:11%;"><b>-k</b> <i>VAL</i>,
<b>--server-public-key</b>=<i>VAL</i>,
<b>--public-key</b>=<i>VAL</i> (absent <b><br>
RAMEN_CONFSERVER_KEY</b> env)</p>

<p style="margin-left:17%;">File name where the server
public key is stored.</p>

<p style="margin-left:11%;"><b>-K</b> <i>VAL</i>,
<b>--server-private-key</b>=<i>VAL</i>,
<b>--private-key</b>=<i>VAL</i> (absent <b><br>
RAMEN_CONFSERVER_PRIV_KEY</b> env)</p>

<p style="margin-left:17%;">File name where the server
private key is stored. This file must not be readable or
writable by others.</p>

<p style="margin-left:11%;"><b>--no-source-examples</b>,
<b>--no-examples</b> (absent <b>RAMEN_NO_EXAMPLES</b>
env)</p>

<p style="margin-left:17%;">Skip the insertion of source
examples in the configuration tree.</p>


<p style="margin-left:11%;"><b>--oldest-restored-site</b>=<i>VAL</i>
(absent=0. or <b>RAMEN_OLDEST_RESTORED_SITE</b> <br>
env)</p>

<p style="margin-left:17%;">Age of the last active site
(before current one was last active) to be restored from the
configuration snapshot (in seconds!).</p>

<p style="margin-left:11%;"><b>-P</b> [<i>VAL</i>],
<b>--secure</b>[=<i>VAL</i>] (default=29341)</p>

<p style="margin-left:17%;">Same as -p, but for the
encrypted/authenticated variant of the configuration
synchronisation service. Notice that both can be run at the
same time, but not on the same address/port, obviously.</p>

<p style="margin-left:11%;"><b>-p</b> [<i>VAL</i>],
<b>--insecure</b>[=<i>VAL</i>] (default=127.0.0.1:29340)</p>

<p style="margin-left:17%;">Where to bind the configuration
synchronisation service. It can be a single port number, in
which case all local addresses will be bound on that port
(equivalent of &quot;*:port&quot;), or an
&quot;IP:port&quot; pair in which case only that IP will be
bound, or even &quot;itf:port&quot; where &quot;itf&quot; is
the network interface name.</p>

<p style="margin-left:11%;"><b>--prefix-log-with-name</b>
(absent <b>RAMEN_PREFIX_LOG_WITH_NAME</b> env)</p>

<p style="margin-left:17%;">Prefix every log lines with the
service name. Comes handy when all logs are scrambled
together, as in the output of docker logs.</p>

<p style="margin-left:11%;"><b>--to-stdout</b>,
<b>--to-stderr</b>, <b>--stdout</b>, <b>--stderr</b> (absent
<b><br>
RAMEN_LOG_TO_STDERR</b> env)</p>

<p style="margin-left:17%;">Log onto stdout/stderr instead
of a file.</p>

<p style="margin-left:11%;"><b>--to-syslog</b>,
<b>--syslog</b> (absent <b>RAMEN_LOG_TO_SYSLOG</b> env)</p>

<p style="margin-left:17%;">log using syslog.</p>

<p style="margin-left:11%;"><b>--users-dir</b>=<i>PATH</i>
(absent <b>RAMEN_USERS_DIR</b> env)</p>

<p style="margin-left:17%;">Where to find users directory
(defaults to $RAMEN_DIR/confserver/users).</p>

<p style="margin-left:11%;"><b>--version</b></p>

<p style="margin-left:17%;">Show version information.</p>

<h2>COMMON OPTIONS
<a name="COMMON OPTIONS"></a>
</h2>



<p style="margin-left:11%; margin-top: 1em"><b>--colors</b>=<i>VAL</i>
(absent=always or <b>RAMEN_COLORS</b> env)</p>

<p style="margin-left:17%;">Whether or not to use colors in
terminal output.</p>

<p style="margin-left:11%;"><b>-d</b>, <b>--debug</b>
(absent <b>RAMEN_DEBUG</b> env)</p>

<p style="margin-left:17%;">Increase verbosity.</p>


<p style="margin-left:11%;"><b>--initial-export-duration</b>=<i>VAL</i>
(absent=0. or <b>RAMEN_INITIAL_EXPORT</b> env)</p>

<p style="margin-left:17%;">How long to export a node
output after startup before a client asks for it.</p>

<p style="margin-left:11%;"><b>--libs</b>=<i>VAL</i>,
<b>--bundle-dir</b>=<i>VAL</i>
(absent=/usr/local/libexec/bundle/ or <b><br>
RAMEN_LIBS</b> env)</p>

<p style="margin-left:17%;">Directory where to find
libraries for the embedded compiler.</p>


<p style="margin-left:11%;"><b>--local-experiments-config</b>=<i>FILE</i>,
<b>--experiments-config</b>=<i>FILE</i> (absent <b><br>
RAMEN_EXPERIMENTS_CONFIG</b> env)</p>

<p style="margin-left:17%;">Configuration file for local
experiments (defaults to
$RAMEN_DIR/experiments/v1/config).</p>

<p style="margin-left:11%;"><b>--masters</b>=<i>VAL</i>
(absent <b>RAMEN_MASTERS</b> env)</p>

<p style="margin-left:17%;">Indicates that Ramen must run
in distributed mode and what sites play the master role.</p>


<p style="margin-left:11%;"><b>--persist-dir</b>=<i>PATH</i>
(absent=/tmp/ramen or <b>RAMEN_DIR</b> env)</p>

<p style="margin-left:17%;">Directory where are stored data
persisted on disc.</p>

<p style="margin-left:11%;"><b>-q</b>, <b>--quiet</b>
(absent <b>RAMEN_QUIET</b> env)</p>

<p style="margin-left:17%;">Decrease verbosity.</p>

<p style="margin-left:11%;"><b>--reuse-prev-files</b>
(absent <b>RAMEN_REUSE_PREV_FILES</b> env)</p>

<p style="margin-left:17%;">Reuse existing source
files.</p>

<p style="margin-left:11%;"><b>-S</b>,
<b>--keep-temp-files</b> (absent
<b>RAMEN_KEEP_TEMP_FILES</b> env)</p>

<p style="margin-left:17%;">Keep temporary files.</p>

<p style="margin-left:11%;"><b>--seed</b>=<i>VAL</i>,
<b>--rand-seed</b>=<i>VAL</i> (absent
<b>RAMEN_RANDOM_SEED</b> env)</p>

<p style="margin-left:17%;">Seed to initialize the random
generator with (will use a random one if unset).</p>

<p style="margin-left:11%;"><b>--site</b>=<i>VAL</i>
(absent <b>HOSTNAME</b> env)</p>

<p style="margin-left:17%;">The name of this site.</p>

<p style="margin-left:11%;"><b>--username</b>=<i>VAL</i>
(absent=_confserver)</p>

<p style="margin-left:17%;">Login name to connect to the
confserver.</p>


<p style="margin-left:11%;"><b>--variant</b>=<i>EXP1=VAR1,EXP2=VAR2...</i>
(absent <b>RAMEN_VARIANTS</b> env)</p>

<p style="margin-left:17%;">Force variants.</p>

<h2>ENVIRONMENT
<a name="ENVIRONMENT"></a>
</h2>


<p style="margin-left:11%; margin-top: 1em">These
environment variables affect the execution of
<b>confserver</b>: <b><br>
HOSTNAME</b></p>

<p style="margin-left:17%;">See option <b>--site</b>.</p>

<p style="margin-left:11%;"><b>RAMEN_COLORS</b></p>

<p style="margin-left:17%;">See option <b>--colors</b>.</p>


<p style="margin-left:11%;"><b>RAMEN_CONFSERVER_KEY</b></p>

<p style="margin-left:17%;">See option
<b>--public-key</b>.</p>


<p style="margin-left:11%;"><b>RAMEN_CONFSERVER_PRIV_KEY</b></p>

<p style="margin-left:17%;">See option
<b>--private-key</b>.</p>

<p style="margin-left:11%;"><b>RAMEN_DAEMONIZE</b></p>

<p style="margin-left:17%;">See option
<b>--daemonize</b>.</p>

<p style="margin-left:11%;"><b>RAMEN_DEBUG</b></p>

<p style="margin-left:17%;">See option <b>--debug</b>.</p>


<p style="margin-left:11%;"><b>RAMEN_DEFAULT_ARCHIVE_RECALL_COST</b></p>

<p style="margin-left:17%;">See option
<b>--default-archive-recall-cost</b>.</p>


<p style="margin-left:11%;"><b>RAMEN_DEFAULT_ARCHIVE_SIZE</b></p>

<p style="margin-left:17%;">See option
<b>--default-archive-total-size</b>.</p>

<p style="margin-left:11%;"><b>RAMEN_DIR</b></p>

<p style="margin-left:17%;">See option
<b>--persist-dir</b>.</p>


<p style="margin-left:11%;"><b>RAMEN_EXPERIMENTS_CONFIG</b></p>

<p style="margin-left:17%;">See option
<b>--experiments-config</b>.</p>


<p style="margin-left:11%;"><b>RAMEN_IGNORE_FILE_PERMS</b></p>

<p style="margin-left:17%;">See option
<b>--ignore-file-perms</b>.</p>


<p style="margin-left:11%;"><b>RAMEN_INCIDENT_HISTORY_LENGTH</b></p>

<p style="margin-left:17%;">See option
<b>--incidents-history-length</b>.</p>


<p style="margin-left:11%;"><b>RAMEN_INITIAL_EXPORT</b></p>

<p style="margin-left:17%;">See option
<b>--initial-export-duration</b>.</p>


<p style="margin-left:11%;"><b>RAMEN_KEEP_TEMP_FILES</b></p>

<p style="margin-left:17%;">See option
<b>--keep-temp-files</b>.</p>

<p style="margin-left:11%;"><b>RAMEN_LIBS</b></p>

<p style="margin-left:17%;">See option
<b>--bundle-dir</b>.</p>

<p style="margin-left:11%;"><b>RAMEN_LOG_TO_STDERR</b></p>

<p style="margin-left:17%;">See option
<b>--to-stdout</b>.</p>

<p style="margin-left:11%;"><b>RAMEN_LOG_TO_SYSLOG</b></p>

<p style="margin-left:17%;">See option
<b>--to-syslog</b>.</p>

<p style="margin-left:11%;"><b>RAMEN_MASTERS</b></p>

<p style="margin-left:17%;">See option
<b>--masters</b>.</p>

<p style="margin-left:11%;"><b>RAMEN_NO_EXAMPLES</b></p>

<p style="margin-left:17%;">See option
<b>--no-source-examples</b>.</p>


<p style="margin-left:11%;"><b>RAMEN_OLDEST_RESTORED_SITE</b></p>

<p style="margin-left:17%;">See option
<b>--oldest-restored-site</b>.</p>


<p style="margin-left:11%;"><b>RAMEN_PREFIX_LOG_WITH_NAME</b></p>

<p style="margin-left:17%;">See option
<b>--prefix-log-with-name</b>.</p>

<p style="margin-left:11%;"><b>RAMEN_QUIET</b></p>

<p style="margin-left:17%;">See option <b>--quiet</b>.</p>

<p style="margin-left:11%;"><b>RAMEN_RANDOM_SEED</b></p>

<p style="margin-left:17%;">See option
<b>--rand-seed</b>.</p>


<p style="margin-left:11%;"><b>RAMEN_REUSE_PREV_FILES</b></p>

<p style="margin-left:17%;">See option
<b>--reuse-prev-files</b>.</p>

<p style="margin-left:11%;"><b>RAMEN_USERS_DIR</b></p>

<p style="margin-left:17%;">See option
<b>--users-dir</b>.</p>

<p style="margin-left:11%;"><b>RAMEN_VARIANTS</b></p>

<p style="margin-left:17%;">See option
<b>--variant</b>.</p>
</div>
</body>
</html>
